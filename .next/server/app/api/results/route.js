(()=>{var e={};e.id=372,e.ids=[372],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1630:e=>{"use strict";e.exports=require("http")},1645:e=>{"use strict";e.exports=require("net")},1997:e=>{"use strict";e.exports=require("punycode")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4075:e=>{"use strict";e.exports=require("zlib")},4631:e=>{"use strict";e.exports=require("tls")},4735:e=>{"use strict";e.exports=require("events")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5511:e=>{"use strict";e.exports=require("crypto")},5591:e=>{"use strict";e.exports=require("https")},6487:()=>{},7728:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>q,routeModule:()=>l,serverHooks:()=>m,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>x});var s={};t.r(s),t.d(s,{GET:()=>p,POST:()=>c});var o=t(6559),i=t(8088),u=t(7719),n=t(2190),a=t(9475);async function c(e){try{let{userId:r,totalQuestions:t,correctAnswers:s,score:o,timeTaken:i,responses:u}=await e.json();if(!r)return n.NextResponse.json({error:"User ID is required"},{status:400});let{data:c,error:p}=await a.ND.from("quiz_attempts").insert({user_id:r,started_at:new Date().toISOString(),completed_at:new Date().toISOString(),time_taken:i,total_questions:t,correct_answers:s,score:o}).select().single();if(p)return console.error("Error saving result:",p),n.NextResponse.json({error:p.message||"Error saving quiz result"},{status:500});return n.NextResponse.json(c)}catch(r){console.error("Error in results route:",r);let e="An error occurred while saving the quiz results";return r instanceof Error?e=r.message:"object"==typeof r&&null!==r&&(e=JSON.stringify(r)),n.NextResponse.json({error:e,details:r},{status:500})}}async function p(e){try{let r=new URL(e.url).searchParams.get("userId");if(!r)return n.NextResponse.json({error:"User ID is required"},{status:400});let{data:t,error:s}=await a.ND.from("quiz_attempts").select(`
        *,
        user_responses (
          question_id,
          user_answer,
          is_correct
        )
      `).eq("user_id",r).order("completed_at",{ascending:!1});if(s)return console.error("Error fetching results:",s),n.NextResponse.json({error:s.message||"Error fetching quiz results"},{status:500});return n.NextResponse.json(t)}catch(e){return n.NextResponse.json({error:e instanceof Error?e.message:"An error occurred"},{status:500})}}let l=new o.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/results/route",pathname:"/api/results",filename:"route",bundlePath:"app/api/results/route"},resolvedPagePath:"/Users/react-js/Desktop/mcq/src/app/api/results/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:d,workUnitAsyncStorage:x,serverHooks:m}=l;function q(){return(0,u.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:x})}},7910:e=>{"use strict";e.exports=require("stream")},7990:()=>{},8335:()=>{},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9428:e=>{"use strict";e.exports=require("buffer")},9475:(e,r,t)=>{"use strict";t.d(r,{ND:()=>s});let s=(0,t(6437).UU)("https://uvsqpmaejmaelmgtyjax.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV2c3FwbWFlam1hZWxtZ3R5amF4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI3NTAyNDUsImV4cCI6MjA2ODMyNjI0NX0.I4PtgWzFq_x-uKu8idA7zdfgeC3OY0mBc2LekIjYKzE")},9551:e=>{"use strict";e.exports=require("url")},9727:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[447,437,580],()=>t(7728));module.exports=s})();