{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///Users/react-js/Desktop/mcq/src/components/Quiz.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from 'react';\nimport { Question, UserResponse } from '@/types/quiz';\nimport { useRouter } from 'next/navigation';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '@/store/store';\nimport TabTracker from './TabTracker';\nimport { ArrowLeft } from 'lucide-react';\n\nexport default function Quiz() {\n  const [questions, setQuestions] = useState<Question[]>([]);\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [responses, setResponses] = useState<UserResponse[]>([]);\n  const [startTime, setStartTime] = useState<Date | null>(null);\n  const [endTime, setEndTime] = useState<Date | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isCompleted, setIsCompleted] = useState(false);\n  const [score, setScore] = useState<number | null>(null);\n\n  const router = useRouter();\n  const user = useSelector((state: RootState) => state.userProfile);\n\n\n\n  useEffect(() => {\n    const initializeQuiz = async () => {\n      setIsLoading(true);\n      try {\n        const response = await fetch('/api/questions');\n        const data = await response.json();\n        console.log('Fetched questions:', data);\n        \n        setQuestions(data);\n        // Use useEffect to set the start time after component mount\n        // This ensures client-side only execution\n        setStartTime(new Date());\n        setIsLoading(false);\n      } catch (error) {\n        console.error('Error fetching questions:', error);\n      }\n      setIsLoading(false);\n    };\n\n    initializeQuiz();\n  }, []);\n\n  const handleAnswer = (answer: string) => {\n    const currentQuestion = questions[currentIndex];\n    const isCorrect = answer === currentQuestion.correct_answer;\n\n    setResponses(prevResponses => {\n      const newResponses = [\n        ...prevResponses,\n        {\n          questionId: currentQuestion.id,\n          answer,\n          isCorrect,\n        },\n      ];\n\n      if (currentIndex === questions.length - 1) {\n        setIsCompleted(true);\n        setEndTime(new Date());\n      } else {\n        setCurrentIndex(currentIndex + 1);\n      }\n\n      return newResponses;\n    });\n  };\n\n  const submitQuiz = async () => {\n    // Ensure we're executing this on the client side\n    if (typeof window === 'undefined') return;\n\n    const correctAnswers = responses.filter((r) => r.isCorrect).length;\n    const scoreValue = (correctAnswers / questions.length) * 100;\n    setScore(scoreValue);\n\n    const timeTaken = Math.floor(\n      (endTime!.getTime() - startTime!.getTime()) / 1000\n    );\n\n    try {\n      // First save to responses endpoint\n      await fetch('/api/responses', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          userId: user.id,\n          totalQuestions: questions.length,\n          correctAnswers,\n          timeTaken,\n          responses,\n        }),\n      });\n\n      // Then save to results endpoint\n      await fetch('/api/results', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          userId: user.id, // Replace with actual user ID from auth\n          totalQuestions: questions.length,\n          correctAnswers,\n          score: scoreValue,\n          timeTaken,\n          responses,\n        }),\n      });\n\n    } catch (error) {\n      console.error('Error saving quiz results:', error);\n    }\n  };\n\n  const handleReturn = () => {\n    if (isCompleted) {\n      router.push('/home');\n    } else {\n      alert('Your test wont be saved!');\n      router.push('/home');\n    }\n  };\n\n  if (isLoading) {\n    return <div>Loading questions...</div>;\n  }\n\n  if (isCompleted) {\n    return (\n      <div className=\"max-w-2xl mx-auto p-6\">\n        <h2 className=\"text-2xl text-black font-bold mb-4\">Quiz Completed!</h2>\n        <div className=\"bg-black shadow-md rounded-lg p-6\">\n          {score !== null ? (\n            <>\n              <p className=\"text-lg mb-2\">\n                Score: {score.toFixed(2)}%\n              </p>\n              <p className=\"mb-2\">\n                Time taken: {Math.floor(\n                  ((endTime?.getTime() || 0) - (startTime?.getTime() || 0)) / 1000\n                )} seconds\n              </p>\n              <p className=\"mb-4\">\n                Correct answers: {responses.filter((r) => r.isCorrect).length} out of{' '}\n                {questions.length}\n              </p>\n              <div className=\"w-full text-end py-4\">\n                <button \n                  onClick={() => router.push('/home')} \n                  className='text-2xl text-white font-light p-2 px-4 hover:text-black hover:bg-white border border-white rounded-lg transition-colors ease-in-out duration-500'\n                >\n                  Done\n                </button>\n              </div>\n            </>\n          ) : (\n            <div className=\"text-center py-4\">\n              <p className=\"text-lg mb-4 text-white\">Ready to submit your answers?</p>\n              <button\n                onClick={submitQuiz}\n                className=\"text-2xl text-white font-light p-2 px-4 hover:text-black hover:bg-white border border-white rounded-lg transition-colors ease-in-out duration-500\"\n              >\n                Submit Quiz\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  const currentQuestion = questions[currentIndex];\n\n  if (!currentQuestion) {\n    return <div>No question available</div>;\n  }\n\n  return (\n    <div className=\"max-w-6xl mx-auto p-6\">\n      {/* <TabTracker /> */}\n      <div onClick={() => handleReturn()} className='underline text-black flex items-center mb-4 gap-1 cursor-pointer'>\n        <ArrowLeft size={14}/>\n        <p >back</p>\n      </div>\n      <div className=\"mb-4\">\n        <span className=\"text-sm text-gray-500\">\n          Question {currentIndex + 1} of {questions.length}\n        </span>\n      </div>\n\n      <div className=\"bg-black shadow-md rounded-lg p-6\">\n        <h2 className=\"text-xl font-semibold mb-4\">{currentQuestion.question}</h2>\n        <div className=\"space-y-3\">\n          {Array.isArray(currentQuestion.options) && currentQuestion.options.map((option, index) => (\n            <button\n              key={index}\n              onClick={() => handleAnswer(option)}\n              className=\"w-full text-left p-3 rounded-md border border-gray-300 hover:bg-gray-50 hover:text-black transition-colors\"\n            >\n              {option}\n            </button>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 421, "column": 0}, "map": {"version":3,"sources":["file:///Users/react-js/Desktop/mcq/supabase/Supabase.ts"],"sourcesContent":["\nimport { createClient } from '@supabase/supabase-js'\n\n// Using environment variables for the remote Supabase instance\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || \"\"\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || \"\"\n\nexport const supabase = createClient(supabaseUrl, supabaseKey)\n\n// Authentication helper functions\nexport const signInWithEmail = async (email: string, password: string) => {\n  const { data, error } = await supabase.auth.signInWithPassword({\n    email,\n    password,\n  })\n  return { data, error }\n}\n\nexport const signUpWithEmail = async (email: string, password: string) => {\n  const { data, error } = await supabase.auth.signUp({\n    email,\n    password,\n  })\n  return { data, error }\n}\n\nexport const signInWithGoogle = async () => {\n  const { data, error } = await supabase.auth.signInWithOAuth({\n    provider: 'google',\n    options: {\n      redirectTo: `${window.location.origin}/auth/callback`,\n    },\n  })\n  return { data, error }\n}\n\nexport const signOut = async () => {\n  const { error } = await supabase.auth.signOut()\n  return { error }\n}\n\nexport const getCurrentUser = async () => {\n  const { data, error } = await supabase.auth.getUser()\n  return { user: data?.user, error }\n}"],"names":[],"mappings":";;;;;;;;AACA;;AAEA,+DAA+D;AAC/D,MAAM,cAAc,gFAAwC;AAC5D,MAAM,cAAc,wPAA6C;AAE1D,MAAM,WAAW,CAAA,GAAA,uLAAA,CAAA,eAAY,AAAD,EAAE,aAAa;AAG3C,MAAM,kBAAkB,OAAO,OAAe;IACnD,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,kBAAkB,CAAC;QAC7D;QACA;IACF;IACA,OAAO;QAAE;QAAM;IAAM;AACvB;AAEO,MAAM,kBAAkB,OAAO,OAAe;IACnD,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,MAAM,CAAC;QACjD;QACA;IACF;IACA,OAAO;QAAE;QAAM;IAAM;AACvB;AAEO,MAAM,mBAAmB;IAC9B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,eAAe,CAAC;QAC1D,UAAU;QACV,SAAS;YACP,YAAY,GAAG,OAAO,QAAQ,CAAC,MAAM,CAAC,cAAc,CAAC;QACvD;IACF;IACA,OAAO;QAAE;QAAM;IAAM;AACvB;AAEO,MAAM,UAAU;IACrB,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAC7C,OAAO;QAAE;IAAM;AACjB;AAEO,MAAM,iBAAiB;IAC5B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACnD,OAAO;QAAE,MAAM,MAAM;QAAM;IAAM;AACnC","debugId":null}},
    {"offset": {"line": 486, "column": 0}, "map": {"version":3,"sources":["file:///Users/react-js/Desktop/mcq/src/components/ui/Header.tsx"],"sourcesContent":["\"use client\"\n\nimport { LogOut } from 'lucide-react';\nimport { useRouter } from 'next/navigation';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '@/store/store';\nimport { supabase } from '../../../supabase/Supabase';\n\nexport default function Header() {\n  const router = useRouter();\n  const userProfile = useSelector((state: RootState) => state.userProfile);\n\n  const handleLogout = async () => {\n    try {\n      await supabase.auth.signOut();\n      router.push('/login');\n    } catch (error) {\n      console.error('Error signing out:', error);\n    }\n  };\n\n  return (\n    <header className=\"w-full h-[10vh] bg-white shadow-sm\">\n      <div className=\"container mx-auto px-4 h-full flex items-center justify-between\">\n        <div className=\"flex items-center space-x-4\">\n          <h1 className=\"text-2xl font-semibold text-gray-800\">Quiz Dashboard</h1>\n          <span className=\"text-gray-500\">|</span>\n          <p className=\"text-gray-600\">Welcome, {userProfile?.username || 'User'}</p>\n        </div>\n        <button\n          onClick={handleLogout}\n          className=\"text-black flex items-center space-x-2 px-4 py-2 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors\"\n        >\n          <LogOut size={18} />\n          <span>Logout</span>\n        </button>\n      </div>\n    </header>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQe,SAAS;IACtB,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,cAAc,CAAA,GAAA,yJAAA,CAAA,cAAW,AAAD,EAAE,CAAC,QAAqB,MAAM,WAAW;IAEvE,MAAM,eAAe;QACnB,IAAI;YACF,MAAM,oHAAA,CAAA,WAAQ,CAAC,IAAI,CAAC,OAAO;YAC3B,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,sBAAsB;QACtC;IACF;IAEA,qBACE,8OAAC;QAAO,WAAU;kBAChB,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAG,WAAU;sCAAuC;;;;;;sCACrD,8OAAC;4BAAK,WAAU;sCAAgB;;;;;;sCAChC,8OAAC;4BAAE,WAAU;;gCAAgB;gCAAU,aAAa,YAAY;;;;;;;;;;;;;8BAElE,8OAAC;oBACC,SAAS;oBACT,WAAU;;sCAEV,8OAAC,0MAAA,CAAA,SAAM;4BAAC,MAAM;;;;;;sCACd,8OAAC;sCAAK;;;;;;;;;;;;;;;;;;;;;;;AAKhB","debugId":null}},
    {"offset": {"line": 594, "column": 0}, "map": {"version":3,"sources":["file:///Users/react-js/Desktop/mcq/src/app/quiz/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { redirect, useRouter } from 'next/navigation';\nimport Quiz from '@/components/Quiz';\nimport { supabase } from '../../../supabase/Supabase';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { RootState } from '@/store/store';\nimport { useState, useEffect } from 'react';\nimport { adduserProfile } from '@/store/slices/userSlice';\nimport Header from '@/components/ui/Header';\n\nexport default function QuizPage() {\n    const [loading, setLoading] = useState(true);\n    const router = useRouter();\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        const checkAuth = async () => {\n            try {\n                const { data: { session } } = await supabase.auth.getSession();\n                if (!session) {\n                    router.push('/login');\n                    return;\n                }\n\n                // Set user profile in Redux\n                const userProfile = {\n                    id: session.user.id,\n                    user_id: session.user.id,\n                    username: session.user.email?.split('@')[0] || 'User',\n                    avatar: '',  // You can add default avatar if needed\n                };\n                dispatch(adduserProfile(userProfile));\n                setLoading(false);\n            } catch (error) {\n                console.error('Auth error:', error);\n                router.push('/login');\n            }\n        };\n\n        checkAuth();\n    }, [dispatch, router]);\n\n    const userProfile = useSelector((state: RootState) => state.userProfile);\n\n\n    return (\n        <div className=\"w-full min-h-screen bg-gradient-to-b from-gray-50 to-gray-100\">\n            <Header />\n            {loading ? (\n                <div className=\"flex items-center justify-center h-[60vh]\">\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900\"></div>\n                </div>\n            ) : (\n                <>\n                    <h1 className=\"text-3xl text-black font-bold text-center py-8\">MCQ Quiz</h1>\n                    <Quiz />\n                </>\n            )}\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AATA;;;;;;;;;AAWe,SAAS;IACpB,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,WAAW,CAAA,GAAA,yJAAA,CAAA,cAAW,AAAD;IAE3B,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACN,MAAM,YAAY;YACd,IAAI;gBACA,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE,GAAG,MAAM,oHAAA,CAAA,WAAQ,CAAC,IAAI,CAAC,UAAU;gBAC5D,IAAI,CAAC,SAAS;oBACV,OAAO,IAAI,CAAC;oBACZ;gBACJ;gBAEA,4BAA4B;gBAC5B,MAAM,cAAc;oBAChB,IAAI,QAAQ,IAAI,CAAC,EAAE;oBACnB,SAAS,QAAQ,IAAI,CAAC,EAAE;oBACxB,UAAU,QAAQ,IAAI,CAAC,KAAK,EAAE,MAAM,IAAI,CAAC,EAAE,IAAI;oBAC/C,QAAQ;gBACZ;gBACA,SAAS,CAAA,GAAA,mIAAA,CAAA,iBAAc,AAAD,EAAE;gBACxB,WAAW;YACf,EAAE,OAAO,OAAO;gBACZ,QAAQ,KAAK,CAAC,eAAe;gBAC7B,OAAO,IAAI,CAAC;YAChB;QACJ;QAEA;IACJ,GAAG;QAAC;QAAU;KAAO;IAErB,MAAM,cAAc,CAAA,GAAA,yJAAA,CAAA,cAAW,AAAD,EAAE,CAAC,QAAqB,MAAM,WAAW;IAGvE,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC,kIAAA,CAAA,UAAM;;;;;YACN,wBACG,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBAAI,WAAU;;;;;;;;;;qCAGnB;;kCACI,8OAAC;wBAAG,WAAU;kCAAiD;;;;;;kCAC/D,8OAAC,0HAAA,CAAA,UAAI;;;;;;;;;;;;;AAKzB","debugId":null}}]
}