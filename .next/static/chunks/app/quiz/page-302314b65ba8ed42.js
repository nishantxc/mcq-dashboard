(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[602],{223:(e,t,s)=>{"use strict";s.d(t,{G6:()=>l,HW:()=>n,Ru:()=>a,bk:()=>i,supabase:()=>r});let r=(0,s(5647).UU)("https://uvsqpmaejmaelmgtyjax.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV2c3FwbWFlam1hZWxtZ3R5amF4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI3NTAyNDUsImV4cCI6MjA2ODMyNjI0NX0.I4PtgWzFq_x-uKu8idA7zdfgeC3OY0mBc2LekIjYKzE"),a=async(e,t)=>{let{data:s,error:a}=await r.auth.signInWithPassword({email:e,password:t});return{data:s,error:a}},i=async(e,t)=>{let{data:s,error:a}=await r.auth.signUp({email:e,password:t});return{data:s,error:a}},l=async()=>{let{data:e,error:t}=await r.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});return{data:e,error:t}},n=async()=>{let{data:e,error:t}=await r.auth.getUser();return{user:null==e?void 0:e.user,error:t}}},1165:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s(5155),a=s(5695),i=s(2115),l=s(4540);let n=(0,s(9946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);function o(){let[e,t]=(0,i.useState)([]),[s,o]=(0,i.useState)(0),[c,d]=(0,i.useState)([]),[u,h]=(0,i.useState)(null),[m,x]=(0,i.useState)(null),[p,g]=(0,i.useState)(!0),[b,f]=(0,i.useState)(!1),[w,y]=(0,i.useState)(null),j=(0,a.useRouter)(),v=(0,l.d4)(e=>e.userProfile);(0,i.useEffect)(()=>{(async()=>{g(!0);try{let e=await fetch("/api/questions"),s=await e.json();console.log("Fetched questions:",s),t(s),h(new Date),g(!1)}catch(e){console.error("Error fetching questions:",e)}g(!1)})()},[]);let N=t=>{let r=e[s],a=t===r.correct_answer;d(i=>{let l=[...i,{questionId:r.id,answer:t,isCorrect:a}];return s===e.length-1?(f(!0),x(new Date)):o(s+1),l})},k=async()=>{let t=c.filter(e=>e.isCorrect).length,s=t/e.length*100;y(s);let r=Math.floor((m.getTime()-u.getTime())/1e3);try{await fetch("/api/responses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:v.id,totalQuestions:e.length,correctAnswers:t,timeTaken:r,responses:c})}),await fetch("/api/results",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:v.id,totalQuestions:e.length,correctAnswers:t,score:s,timeTaken:r,responses:c})})}catch(e){console.error("Error saving quiz results:",e)}},C=()=>{b||alert("Your test wont be saved!"),j.push("/home")};if(p)return(0,r.jsx)("div",{children:"Loading questions..."});if(b)return(0,r.jsxs)("div",{className:"max-w-2xl mx-auto p-6",children:[(0,r.jsx)("h2",{className:"text-2xl text-black font-bold mb-4",children:"Quiz Completed!"}),(0,r.jsx)("div",{className:"bg-black shadow-md rounded-lg p-6",children:null!==w?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("p",{className:"text-lg mb-2",children:["Score: ",w.toFixed(2),"%"]}),(0,r.jsxs)("p",{className:"mb-2",children:["Time taken: ",Math.floor((((null==m?void 0:m.getTime())||0)-((null==u?void 0:u.getTime())||0))/1e3)," seconds"]}),(0,r.jsxs)("p",{className:"mb-4",children:["Correct answers: ",c.filter(e=>e.isCorrect).length," out of"," ",e.length]}),(0,r.jsx)("div",{className:"w-full text-end py-4",children:(0,r.jsx)("button",{onClick:()=>j.push("/home"),className:"text-2xl text-white font-light p-2 px-4 hover:text-black hover:bg-white border border-white rounded-lg transition-colors ease-in-out duration-500",children:"Done"})})]}):(0,r.jsxs)("div",{className:"text-center py-4",children:[(0,r.jsx)("p",{className:"text-lg mb-4 text-white",children:"Ready to submit your answers?"}),(0,r.jsx)("button",{onClick:k,className:"text-2xl text-white font-light p-2 px-4 hover:text-black hover:bg-white border border-white rounded-lg transition-colors ease-in-out duration-500",children:"Submit Quiz"})]})})]});let I=e[s];return I?(0,r.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,r.jsxs)("div",{onClick:()=>C(),className:"underline text-black flex items-center mb-4 gap-1 cursor-pointer",children:[(0,r.jsx)(n,{size:14}),(0,r.jsx)("p",{children:"back"})]}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:["Question ",s+1," of ",e.length]})}),(0,r.jsxs)("div",{className:"bg-black shadow-md rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:I.question}),(0,r.jsx)("div",{className:"space-y-3",children:Array.isArray(I.options)&&I.options.map((e,t)=>(0,r.jsx)("button",{onClick:()=>N(e),className:"w-full text-left p-3 rounded-md border border-gray-300 hover:bg-gray-50 hover:text-black transition-colors",children:e},t))})]})]}):(0,r.jsx)("div",{children:"No question available"})}var c=s(223),d=s(2560),u=s(6699);function h(){let[e,t]=(0,i.useState)(!0),s=(0,a.useRouter)(),n=(0,l.wA)();return(0,i.useEffect)(()=>{(async()=>{try{var e;let{data:{session:r}}=await c.supabase.auth.getSession();if(!r)return void s.push("/login");let a={id:r.user.id,user_id:r.user.id,username:(null==(e=r.user.email)?void 0:e.split("@")[0])||"User",avatar:""};n((0,d.O)(a)),t(!1)}catch(e){console.error("Auth error:",e),s.push("/login")}})()},[n,s]),(0,l.d4)(e=>e.userProfile),(0,r.jsxs)("div",{className:"w-full min-h-screen bg-gradient-to-b from-gray-50 to-gray-100",children:[(0,r.jsx)(u.A,{}),e?(0,r.jsx)("div",{className:"flex items-center justify-center h-[60vh]",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h1",{className:"text-3xl text-black font-bold text-center py-8",children:"MCQ Quiz"}),(0,r.jsx)(o,{})]})]})}},2560:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>i,O:()=>a});let r=(0,s(6439).Z0)({name:"userProfile",initialState:{id:"",username:"",avatar:"",user_id:""},reducers:{adduserProfile:(e,t)=>t.payload}}),{adduserProfile:a}=r.actions,i=r.reducer},6699:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(5155);let a=(0,s(9946).A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var i=s(5695),l=s(4540),n=s(223);function o(){let e=(0,i.useRouter)(),t=(0,l.d4)(e=>e.userProfile),s=async()=>{try{await n.supabase.auth.signOut(),e.push("/login")}catch(e){console.error("Error signing out:",e)}};return(0,r.jsx)("header",{className:"w-full h-[10vh] bg-white shadow-sm",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 h-full flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-gray-800",children:"Quiz Dashboard"}),(0,r.jsx)("span",{className:"text-gray-500",children:"|"}),(0,r.jsxs)("p",{className:"text-gray-600",children:["Welcome, ",(null==t?void 0:t.username)||"User"]})]}),(0,r.jsxs)("button",{onClick:s,className:"text-black flex items-center space-x-2 px-4 py-2 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:[(0,r.jsx)(a,{size:18}),(0,r.jsx)("span",{children:"Logout"})]})]})})}},8116:(e,t,s)=>{Promise.resolve().then(s.bind(s,1165))},9946:(e,t,s)=>{"use strict";s.d(t,{A:()=>u});var r=s(2115);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),l=e=>{let t=i(e);return t.charAt(0).toUpperCase()+t.slice(1)},n=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()},o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,r.forwardRef)((e,t)=>{let{color:s="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:d="",children:u,iconNode:h,...m}=e;return(0,r.createElement)("svg",{ref:t,...c,width:a,height:a,stroke:s,strokeWidth:l?24*Number(i)/Number(a):i,className:n("lucide",d),...!u&&!o(m)&&{"aria-hidden":"true"},...m},[...h.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let s=(0,r.forwardRef)((s,i)=>{let{className:o,...c}=s;return(0,r.createElement)(d,{ref:i,iconNode:t,className:n("lucide-".concat(a(l(e))),"lucide-".concat(e),o),...c})});return s.displayName=l(e),s}}},e=>{var t=t=>e(e.s=t);e.O(0,[825,540,439,441,684,358],()=>t(8116)),_N_E=e.O()}]);