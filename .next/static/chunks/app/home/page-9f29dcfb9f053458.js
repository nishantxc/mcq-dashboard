(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[620],{106:(e,s,t)=>{Promise.resolve().then(t.bind(t,7886))},223:(e,s,t)=>{"use strict";t.d(s,{G6:()=>l,HW:()=>n,Ru:()=>a,bk:()=>i,supabase:()=>r});let r=(0,t(5647).UU)("https://uvsqpmaejmaelmgtyjax.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV2c3FwbWFlam1hZWxtZ3R5amF4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI3NTAyNDUsImV4cCI6MjA2ODMyNjI0NX0.I4PtgWzFq_x-uKu8idA7zdfgeC3OY0mBc2LekIjYKzE"),a=async(e,s)=>{let{data:t,error:a}=await r.auth.signInWithPassword({email:e,password:s});return{data:t,error:a}},i=async(e,s)=>{let{data:t,error:a}=await r.auth.signUp({email:e,password:s});return{data:t,error:a}},l=async()=>{let{data:e,error:s}=await r.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});return{data:e,error:s}},n=async()=>{let{data:e,error:s}=await r.auth.getUser();return{user:null==e?void 0:e.user,error:s}}},2560:(e,s,t)=>{"use strict";t.d(s,{Ay:()=>i,O:()=>a});let r=(0,t(6439).Z0)({name:"userProfile",initialState:{id:"",username:"",avatar:"",user_id:""},reducers:{adduserProfile:(e,s)=>s.payload}}),{adduserProfile:a}=r.actions,i=r.reducer},6699:(e,s,t)=>{"use strict";t.d(s,{A:()=>o});var r=t(5155);let a=(0,t(9946).A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var i=t(5695),l=t(4540),n=t(223);function o(){let e=(0,i.useRouter)(),s=(0,l.d4)(e=>e.userProfile),t=async()=>{try{await n.supabase.auth.signOut(),e.push("/login")}catch(e){console.error("Error signing out:",e)}};return(0,r.jsx)("header",{className:"w-full h-[10vh] bg-white shadow-sm",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 h-full flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-gray-800",children:"Quiz Dashboard"}),(0,r.jsx)("span",{className:"text-gray-500",children:"|"}),(0,r.jsxs)("p",{className:"text-gray-600",children:["Welcome, ",(null==s?void 0:s.username)||"User"]})]}),(0,r.jsxs)("button",{onClick:t,className:"text-black flex items-center space-x-2 px-4 py-2 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:[(0,r.jsx)(a,{size:18}),(0,r.jsx)("span",{children:"Logout"})]})]})})}},7886:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var r=t(5155),a=t(2115),i=t(5695),l=t(4540),n=t(223),o=t(6699);function c(e){let{attempts:s,isLoading:t}=e;return t?(0,r.jsx)("div",{children:"Loading quiz history..."}):s&&Array.isArray(s)&&0!==s.length?(0,r.jsx)("div",{className:"max-h-[70vh] bg-gradient-to-b from-gray-50 to-gray-100 overflow-y-auto",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,r.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,r.jsx)("div",{className:"bg-white shadow-md rounded-lg p-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600 font-semibold",children:"Date:"}),(0,r.jsx)("p",{className:"font-medium text-gray-500",children:new Date(e.completed_at||"").toLocaleDateString()})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600 font-semibold",children:"Score:"}),(0,r.jsxs)("p",{className:"font-medium text-gray-500",children:[e.score.toFixed(2),"%"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600 font-semibold",children:"Time Taken:"}),(0,r.jsxs)("p",{className:"font-medium text-gray-500",children:[e.time_taken," seconds"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600 font-semibold",children:"Correct Answers:"}),(0,r.jsxs)("p",{className:"font-medium text-gray-500",children:[e.correct_answers," / ",e.total_questions]})]})]})},e.id))})})}):(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,r.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No quiz attempts found."})})})}var d=t(2560);function u(){let e=(0,i.useRouter)(),[s,t]=(0,a.useState)([]),[u,h]=(0,a.useState)(!0),[m,x]=(0,a.useState)([]),[g,p]=(0,a.useState)(!0),y=(0,l.d4)(e=>e.userProfile),f=(0,l.wA)();(0,a.useEffect)(()=>{j()},[]);let j=async()=>{try{let e=y?y.id:"";if(!e){console.log("No user ID available"),x([]),p(!1);return}let s=await fetch("/api/results?userId=".concat(e));if(!s.ok)throw Error("Failed to fetch quiz history");let t=await s.json();console.log("Fetched quiz history:",t),x(Array.isArray(t)?t:[]),p(!1)}catch(e){console.error("Error fetching quiz history:",e),x([]),p(!1)}};return(0,a.useEffect)(()=>{(async()=>{let{data:{session:s}}=await n.supabase.auth.getSession();s||e.push("/login")})()},[e]),(0,a.useEffect)(()=>{(async()=>{try{var s;let{data:{session:t}}=await n.supabase.auth.getSession();if(!t)return void e.push("/login");let r={id:t.user.id,user_id:t.user.id,username:(null==(s=t.user.email)?void 0:s.split("@")[0])||"User",avatar:""};f((0,d.O)(r)),h(!1)}catch(s){console.error("Auth error:",s),e.push("/login")}})()},[f,e]),(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100",children:[(0,r.jsx)(o.A,{}),(0,r.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 space-y-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Quiz Instructions"}),(0,r.jsxs)("div",{className:"space-y-3 text-gray-600",children:[(0,r.jsx)("p",{children:"• Each quiz consists of multiple choice questions"}),(0,r.jsx)("p",{children:"• Select the best answer from the given options"}),(0,r.jsx)("p",{children:"• Your time and score will be recorded"}),(0,r.jsx)("p",{children:"• Results will be shown immediately after completion"}),(0,r.jsx)("p",{children:"• You can retake the quiz multiple times"})]}),(0,r.jsx)("button",{onClick:()=>e.push("/quiz"),className:"w-full mt-4 bg-black hover:bg-black/80 text-white py-3 px-6 rounded-lg font-medium transition-colors",children:"Start New Quiz"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Recent Results"}),g?(0,r.jsx)("div",{className:"flex justify-center py-8",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,r.jsx)("div",{children:(0,r.jsx)(c,{attempts:m,isLoading:g})})]})]})})]})}},9946:(e,s,t)=>{"use strict";t.d(s,{A:()=>u});var r=t(2115);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,t)=>t?t.toUpperCase():s.toLowerCase()),l=e=>{let s=i(e);return s.charAt(0).toUpperCase()+s.slice(1)},n=function(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return s.filter((e,s,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===s).join(" ").trim()},o=e=>{for(let s in e)if(s.startsWith("aria-")||"role"===s||"title"===s)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,r.forwardRef)((e,s)=>{let{color:t="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:d="",children:u,iconNode:h,...m}=e;return(0,r.createElement)("svg",{ref:s,...c,width:a,height:a,stroke:t,strokeWidth:l?24*Number(i)/Number(a):i,className:n("lucide",d),...!u&&!o(m)&&{"aria-hidden":"true"},...m},[...h.map(e=>{let[s,t]=e;return(0,r.createElement)(s,t)}),...Array.isArray(u)?u:[u]])}),u=(e,s)=>{let t=(0,r.forwardRef)((t,i)=>{let{className:o,...c}=t;return(0,r.createElement)(d,{ref:i,iconNode:s,className:n("lucide-".concat(a(l(e))),"lucide-".concat(e),o),...c})});return t.displayName=l(e),t}}},e=>{var s=s=>e(e.s=s);e.O(0,[825,722,441,684,358],()=>s(106)),_N_E=e.O()}]);